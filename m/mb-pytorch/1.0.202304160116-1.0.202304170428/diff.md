# Comparing `tmp/mb_pytorch-1.0.202304160116-py3-none-any.whl.zip` & `tmp/mb_pytorch-1.0.202304170428-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,9 @@
-Zip file size: 29617 bytes, number of entries: 36
--rw-rw-r--  2.0 unx     5492 b- defN 23-Apr-16 01:15 mb_pytorch/classification/training.py
+Zip file size: 31325 bytes, number of entries: 37
+-rw-rw-r--  2.0 unx     5681 b- defN 23-Apr-17 04:27 mb_pytorch/classification/training.py
 -rw-rw-r--  2.0 unx       44 b- defN 23-Mar-16 11:39 mb_pytorch/dataloader/__init__.py
 -rw-rw-r--  2.0 unx    12157 b- defN 23-Apr-14 17:23 mb_pytorch/dataloader/loader.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Feb-23 13:56 mb_pytorch/metalearning/__init__.py
 -rw-rw-r--  2.0 unx     1385 b- defN 23-Mar-02 03:28 mb_pytorch/metalearning/meta_utils.py
 -rw-rw-r--  2.0 unx     1030 b- defN 23-Mar-15 02:58 mb_pytorch/metalearning/proto_dataloader.py
 -rw-rw-r--  2.0 unx     2861 b- defN 23-Mar-03 23:55 mb_pytorch/metalearning/prototypical.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Mar-31 19:54 mb_pytorch/models/__init__.py
@@ -13,26 +13,27 @@
 -rw-rw-r--  2.0 unx        0 b- defN 23-Mar-31 19:54 mb_pytorch/models/blocks/__init__.py
 -rw-rw-r--  2.0 unx     2801 b- defN 23-Apr-01 00:43 mb_pytorch/models/blocks/attention_block.py
 -rw-rw-r--  2.0 unx     3629 b- defN 23-Mar-23 00:49 mb_pytorch/models/blocks/cnn.py
 -rw-rw-r--  2.0 unx     4783 b- defN 23-Mar-23 04:50 mb_pytorch/models/blocks/conv_block.py
 -rw-rw-r--  2.0 unx      920 b- defN 23-Mar-17 22:06 mb_pytorch/models/blocks/conv_with_relu.py
 -rw-rw-r--  2.0 unx     2256 b- defN 23-Mar-23 14:45 mb_pytorch/models/blocks/model_out.py
 -rw-rw-r--  2.0 unx     1184 b- defN 23-Mar-23 01:40 mb_pytorch/models/blocks/rnn.py
+-rw-rw-r--  2.0 unx     4800 b- defN 23-Apr-16 01:34 mb_pytorch/segmentation/training.py
 -rw-rw-r--  2.0 unx     1630 b- defN 23-Mar-17 00:48 mb_pytorch/training/accelerate_train.py
 -rw-rw-r--  2.0 unx     1443 b- defN 23-Apr-08 10:22 mb_pytorch/training/train_params.py
 -rw-rw-r--  2.0 unx      144 b- defN 23-Apr-01 17:43 mb_pytorch/training/training.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-Feb-23 13:56 mb_pytorch/utils/__init__.py
 -rw-rw-r--  2.0 unx     1055 b- defN 23-Mar-17 02:23 mb_pytorch/utils/compiler.py
 -rw-rw-r--  2.0 unx      257 b- defN 23-Mar-01 22:55 mb_pytorch/utils/dist.py
 -rw-rw-r--  2.0 unx     3391 b- defN 23-Apr-11 23:28 mb_pytorch/utils/extra_utils.py
 -rw-rw-r--  2.0 unx     7178 b- defN 23-Mar-15 02:58 mb_pytorch/utils/generate_emb.py
 -rw-rw-r--  2.0 unx     2582 b- defN 23-Apr-03 19:30 mb_pytorch/utils/losses.py
 -rw-rw-r--  2.0 unx     1199 b- defN 23-Apr-04 20:14 mb_pytorch/utils/metrics.py
 -rw-rw-r--  2.0 unx     6220 b- defN 23-Apr-13 20:59 mb_pytorch/utils/viewer.py
 -rw-rw-r--  2.0 unx      994 b- defN 23-Mar-06 13:11 mb_pytorch/utils/yaml_reader.py
--rwxrwxr-x  2.0 unx     1304 b- defN 23-Apr-16 01:16 mb_pytorch-1.0.202304160116.data/scripts/dataload_results.py
--rwxrwxr-x  2.0 unx      980 b- defN 23-Mar-15 02:59 mb_pytorch-1.0.202304160116.data/scripts/emb.py
--rw-rw-r--  2.0 unx      329 b- defN 23-Apr-16 01:16 mb_pytorch-1.0.202304160116.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Apr-16 01:16 mb_pytorch-1.0.202304160116.dist-info/WHEEL
--rw-rw-r--  2.0 unx       11 b- defN 23-Apr-16 01:16 mb_pytorch-1.0.202304160116.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3256 b- defN 23-Apr-16 01:16 mb_pytorch-1.0.202304160116.dist-info/RECORD
-36 files, 86368 bytes uncompressed, 24297 bytes compressed:  71.9%
+-rwxrwxr-x  2.0 unx     1304 b- defN 23-Apr-17 04:28 mb_pytorch-1.0.202304170428.data/scripts/dataload_results.py
+-rwxrwxr-x  2.0 unx      980 b- defN 23-Mar-15 02:59 mb_pytorch-1.0.202304170428.data/scripts/emb.py
+-rw-rw-r--  2.0 unx      329 b- defN 23-Apr-17 04:28 mb_pytorch-1.0.202304170428.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Apr-17 04:28 mb_pytorch-1.0.202304170428.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       11 b- defN 23-Apr-17 04:28 mb_pytorch-1.0.202304170428.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3348 b- defN 23-Apr-17 04:28 mb_pytorch-1.0.202304170428.dist-info/RECORD
+37 files, 91449 bytes uncompressed, 25859 bytes compressed:  71.7%
```

## zipnote {}

```diff
@@ -48,14 +48,17 @@
 
 Filename: mb_pytorch/models/blocks/model_out.py
 Comment: 
 
 Filename: mb_pytorch/models/blocks/rnn.py
 Comment: 
 
+Filename: mb_pytorch/segmentation/training.py
+Comment: 
+
 Filename: mb_pytorch/training/accelerate_train.py
 Comment: 
 
 Filename: mb_pytorch/training/train_params.py
 Comment: 
 
 Filename: mb_pytorch/training/training.py
@@ -84,26 +87,26 @@
 
 Filename: mb_pytorch/utils/viewer.py
 Comment: 
 
 Filename: mb_pytorch/utils/yaml_reader.py
 Comment: 
 
-Filename: mb_pytorch-1.0.202304160116.data/scripts/dataload_results.py
+Filename: mb_pytorch-1.0.202304170428.data/scripts/dataload_results.py
 Comment: 
 
-Filename: mb_pytorch-1.0.202304160116.data/scripts/emb.py
+Filename: mb_pytorch-1.0.202304170428.data/scripts/emb.py
 Comment: 
 
-Filename: mb_pytorch-1.0.202304160116.dist-info/METADATA
+Filename: mb_pytorch-1.0.202304170428.dist-info/METADATA
 Comment: 
 
-Filename: mb_pytorch-1.0.202304160116.dist-info/WHEEL
+Filename: mb_pytorch-1.0.202304170428.dist-info/WHEEL
 Comment: 
 
-Filename: mb_pytorch-1.0.202304160116.dist-info/top_level.txt
+Filename: mb_pytorch-1.0.202304170428.dist-info/top_level.txt
 Comment: 
 
-Filename: mb_pytorch-1.0.202304160116.dist-info/RECORD
+Filename: mb_pytorch-1.0.202304170428.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## mb_pytorch/classification/training.py

```diff
@@ -7,15 +7,15 @@
 import os
 from mb_utils.src.logging import logger
 from pytorch_grad_cam import GradCAM
 from pytorch_grad_cam.utils.image import show_cam_on_image
 import numpy as np
 from ..utils.viewer import new_show_cam_on_image
 
-__all__ = ['train_loop']
+__all__ = ['classification_train_loop']
 
 #yaml_file = '/home/malav/mb_pytorch/scripts/models/loader_y.yaml'
 #data = DataLoader(yaml_file,logger=None)
 #data_model = data.data_dict['model']
 #train_loader, val_loader,_,_ = data.data_load(logger=None)
 #model = ModelLoader(data_model,logger=None)
 
@@ -31,15 +31,15 @@
 
 #path_logs = os.path.join(data['data']['work_dir'], 'logs')
 #writer = SummaryWriter(log_dir=path_logs)
 
 #logger = logger
 
 
-def train_loop( k_data,data_model,model,train_loader,val_loader,loss_attr,optimizer,scheduler=None,writer=None,logger=None,gradcam=None,gradcam_rgb=False,device='cpu'):
+def classification_train_loop( k_data,data_model,model,train_loader,val_loader,loss_attr,optimizer,scheduler=None,writer=None,logger=None,gradcam=None,gradcam_rgb=False,device='cpu'):
     """
     Function to train the model
     Args:
         data: data dictionary YAML of DataLoader
         data_model: model parameters - data.data_dict['model']
         model: model to be trained
         train_loader: train dataloader
@@ -100,34 +100,38 @@
         if writer is not None:
             for name, param in model.named_parameters():
                 writer.add_histogram(name, param, global_step=i)
         
         #validation loop
         val_loss = 0
         val_acc = 0
+        new_val_loss = 0
         #num_samples = 0
     
         model.eval()
         with torch.no_grad():
             for x_val, y_val in val_loader:
                 x_val, y_val = x_val.to(device), y_val.to(device)
                 output = model(x_val)
-                val_loss += loss_attr()(output, y_val).item() * x_val.size(0)
+                old_val_loss = new_val_loss
+                val_loss += loss_attr()(output, y_val).item() #* x_val.size(0)
                 _, preds = torch.max(output, 1)
                 val_acc += torch.sum(preds == y_val.data)
+                new_val_loss = val_loss-old_val_loss
                 #num_samples += x_val.size(0)
                 if logger: 
-                    logger.info(f'Epoch {i+1} - Batch {j+1} - Val Loss: {val_loss}')
+                    logger.info(f'Epoch {i+1} - Batch {j+1} - Val Loss: {new_val_loss:.3f}')
             
             avg_val_loss = val_loss / len(val_loader)
             val_acc = val_acc/len(val_loader)
             #val_loss /= num_samples
             #val_acc = val_acc / num_samples
             if logger:
-                logger.info(f'Epoch {i+1} -Avg Val Loss: {avg_val_loss:.3f}', f'Epoch {i+1} - Val Accuracy: {val_acc:.3f}')
+                logger.info(f'Epoch {i+1} -Avg Val Loss: {avg_val_loss:.3f}')
+                logger.info(f'Epoch {i+1} - Val Accuracy: {val_acc:.3f}')
     
         if writer is not None:
             writer.add_scalar('Loss/val', val_loss, global_step=i)
             writer.add_scalar('Accuracy/val', val_acc, global_step=i)
     
         # save best model
         if i == 0:
```

## Comparing `mb_pytorch-1.0.202304160116.data/scripts/dataload_results.py` & `mb_pytorch-1.0.202304170428.data/scripts/dataload_results.py`

 * *Files identical despite different names*

## Comparing `mb_pytorch-1.0.202304160116.data/scripts/emb.py` & `mb_pytorch-1.0.202304170428.data/scripts/emb.py`

 * *Files identical despite different names*

## Comparing `mb_pytorch-1.0.202304160116.dist-info/RECORD` & `mb_pytorch-1.0.202304170428.dist-info/RECORD`

 * *Files 13% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-mb_pytorch/classification/training.py,sha256=CfdYyOPfZRSHPtLxbOyf-p1lCQ1ZAsglObwbDWfrG2Y,5492
+mb_pytorch/classification/training.py,sha256=8k9Q7GNwcDGml1WOzFL9tvlew3atsgQ6fMrohJXm_oM,5681
 mb_pytorch/dataloader/__init__.py,sha256=nB0xPAHbI91Ra1dDkWR1l4td5A4k9xko-I5Jdgv5apI,44
 mb_pytorch/dataloader/loader.py,sha256=oD73gXl4LP1ValUsNrtNySexiKjx1CvZPHNqWTC3c-g,12157
 mb_pytorch/metalearning/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 mb_pytorch/metalearning/meta_utils.py,sha256=mgHYiQIIcYQ1pVTJcrjquSXpQstdYD1q8iXO09Zao1s,1385
 mb_pytorch/metalearning/proto_dataloader.py,sha256=WvrfZYkYMxorocCkR_zHS_AC8W_ML9YndB-P6evkdcc,1030
 mb_pytorch/metalearning/prototypical.py,sha256=qFVf6VF3s8zskGqbM3geJV-dfkdO3tRaf3P8U_KR-cE,2861
 mb_pytorch/models/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
@@ -12,25 +12,26 @@
 mb_pytorch/models/blocks/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 mb_pytorch/models/blocks/attention_block.py,sha256=jMkfI79upW-PDc28dQ17s34gUR0gCpMB0XIpGgFDE_Q,2801
 mb_pytorch/models/blocks/cnn.py,sha256=IFPDIkKb-LyfzqK9RshqzNidSDdfrRmMylADYvWGACE,3629
 mb_pytorch/models/blocks/conv_block.py,sha256=vlcJiBwkbbmhQMpGLzQA0S14Wkw1Ai9adSbOquFBk0c,4783
 mb_pytorch/models/blocks/conv_with_relu.py,sha256=WIwJBfzvp-kE8QY6Ts5wg0ioJAcJIvmqKLpSl46j_II,920
 mb_pytorch/models/blocks/model_out.py,sha256=JmtY1zHCtkj-RbEVhQ8e6EvXd5WWVLrP9Lb_FigO7rA,2256
 mb_pytorch/models/blocks/rnn.py,sha256=DpEgvmK5Eh4HOQaF1Uk-tZFcocDkZhZxO08EALY1_Bs,1184
+mb_pytorch/segmentation/training.py,sha256=toEGemUPbde0UtZ6F6sO4Lv00CBSYmGzk8YmaNNC4yQ,4800
 mb_pytorch/training/accelerate_train.py,sha256=aozId-qro7FzfjxbqCW09PWGUBphZxEIicF_gYyhQG8,1630
 mb_pytorch/training/train_params.py,sha256=Algc1WIhyD11cRod7ZvBVdofKFCFzVI_D3dd4YAAPYg,1443
 mb_pytorch/training/training.py,sha256=3zRnYRKMO0K0VxgZEjf3p1b0mMLGVwZb5pDNGskjovY,144
 mb_pytorch/utils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 mb_pytorch/utils/compiler.py,sha256=ixu-wc--ykhsjXTZINw34MLmZFg7L-dLkYs7p-nn6i4,1055
 mb_pytorch/utils/dist.py,sha256=7-ZdntmiugRWYnT5wileo8mYTuV1dbjVl4ffJsfnfAw,257
 mb_pytorch/utils/extra_utils.py,sha256=-MaT-x3gwgEOVLpg-tWm5yLFtI0CxpV0QUlXx-rqu08,3391
 mb_pytorch/utils/generate_emb.py,sha256=2iK8wRIrYfaLpEgjdbFnDqGU5ux-1JhncQoeboW_6LQ,7178
 mb_pytorch/utils/losses.py,sha256=OLCPLkJH46IofSSVly2xdcklVv7Q5OFFEGtVrJcV7V0,2582
 mb_pytorch/utils/metrics.py,sha256=Kqmdu9llSjR8aRp3IVlmy6PqeQexf0ZXjTJUcEtvcfI,1199
 mb_pytorch/utils/viewer.py,sha256=tHdAPjUbGmrNgJQICc-8pLPc9VJB0Qr0JdeGtQMq4os,6220
 mb_pytorch/utils/yaml_reader.py,sha256=Azgr_5qttsH_BBVsCtfccFMvK6IEjTRYhd5qp4S5uzk,994
-mb_pytorch-1.0.202304160116.data/scripts/dataload_results.py,sha256=8IFAH7WX-nSJ7V532rr3Cl7R37v0jhSakw0JCd9dalE,1304
-mb_pytorch-1.0.202304160116.data/scripts/emb.py,sha256=5jSbTGNOhusDTvHZeaTwk4pmJa4HIdkRGd98s0L4Rl0,980
-mb_pytorch-1.0.202304160116.dist-info/METADATA,sha256=fwsbZaLjPjKZRoupQVdktxbY28lZTccWMOKxuuokbBE,329
-mb_pytorch-1.0.202304160116.dist-info/WHEEL,sha256=g4nMs7d-Xl9-xC9XovUrsDHGXt-FT0E17Yqo92DEfvY,92
-mb_pytorch-1.0.202304160116.dist-info/top_level.txt,sha256=2m_aBiEfjq3pZM2NtYSlTqlgoQxH6WaK8_8SsRicIvg,11
-mb_pytorch-1.0.202304160116.dist-info/RECORD,,
+mb_pytorch-1.0.202304170428.data/scripts/dataload_results.py,sha256=8IFAH7WX-nSJ7V532rr3Cl7R37v0jhSakw0JCd9dalE,1304
+mb_pytorch-1.0.202304170428.data/scripts/emb.py,sha256=5jSbTGNOhusDTvHZeaTwk4pmJa4HIdkRGd98s0L4Rl0,980
+mb_pytorch-1.0.202304170428.dist-info/METADATA,sha256=dhZIDdZhX14VhL_d3s5VtJuiTVKwx7K-WwarCzZm1cs,329
+mb_pytorch-1.0.202304170428.dist-info/WHEEL,sha256=g4nMs7d-Xl9-xC9XovUrsDHGXt-FT0E17Yqo92DEfvY,92
+mb_pytorch-1.0.202304170428.dist-info/top_level.txt,sha256=2m_aBiEfjq3pZM2NtYSlTqlgoQxH6WaK8_8SsRicIvg,11
+mb_pytorch-1.0.202304170428.dist-info/RECORD,,
```

