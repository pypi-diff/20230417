# Comparing `tmp/pyship-0.1.6-py3-none-any.whl.zip` & `tmp/pyship-0.1.7-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,38 +1,38 @@
-Zip file size: 1505576 bytes, number of entries: 36
+Zip file size: 1505864 bytes, number of entries: 36
 -rw-rw-rw-  2.0 fat     1336 b- defN 23-Apr-16 00:47 pyship/__init__.py
 -rw-rw-rw-  2.0 fat       86 b- defN 23-Apr-16 00:47 pyship/__main__.py
--rw-rw-rw-  2.0 fat      389 b- defN 23-Apr-16 03:53 pyship/_version_.py
--rw-rw-rw-  2.0 fat     7347 b- defN 23-Apr-17 02:27 pyship/app_info.py
--rw-rw-rw-  2.0 fat     1882 b- defN 23-Apr-17 02:27 pyship/arguments.py
+-rw-rw-rw-  2.0 fat      389 b- defN 23-Apr-17 05:13 pyship/_version_.py
+-rw-rw-rw-  2.0 fat     7347 b- defN 23-Apr-17 05:02 pyship/app_info.py
+-rw-rw-rw-  2.0 fat     1882 b- defN 23-Apr-17 05:02 pyship/arguments.py
 -rw-rw-rw-  2.0 fat     1366 b- defN 23-Apr-16 00:47 pyship/atomic_zip.py
 -rw-rw-rw-  2.0 fat     8237 b- defN 23-Apr-16 00:47 pyship/clip.py
 -rw-rw-rw-  2.0 fat     1264 b- defN 23-Apr-16 00:47 pyship/cloud.py
 -rw-rw-rw-  2.0 fat       19 b- defN 23-Apr-16 00:47 pyship/constants.py
--rw-rw-rw-  2.0 fat     6146 b- defN 23-Apr-17 02:27 pyship/create_launcher.py
--rw-rw-rw-  2.0 fat     1871 b- defN 23-Apr-16 00:47 pyship/download.py
+-rw-rw-rw-  2.0 fat     6247 b- defN 23-Apr-17 05:28 pyship/create_launcher.py
+-rw-rw-rw-  2.0 fat     2460 b- defN 23-Apr-17 05:41 pyship/download.py
 -rw-rw-rw-  2.0 fat  1829954 b- defN 23-Apr-16 00:47 pyship/get-pip.py
 -rw-rw-rw-  2.0 fat      966 b- defN 23-Apr-16 00:47 pyship/logging.py
--rw-rw-rw-  2.0 fat      866 b- defN 23-Apr-17 02:27 pyship/main.py
--rw-rw-rw-  2.0 fat    12744 b- defN 23-Apr-17 02:27 pyship/nsis.py
+-rw-rw-rw-  2.0 fat      866 b- defN 23-Apr-17 05:02 pyship/main.py
+-rw-rw-rw-  2.0 fat    12744 b- defN 23-Apr-17 05:02 pyship/nsis.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-16 00:47 pyship/py.typed
 -rw-rw-rw-  2.0 fat   103500 b- defN 23-Apr-16 00:47 pyship/pyship.ico
--rw-rw-rw-  2.0 fat     5444 b- defN 23-Apr-17 02:27 pyship/pyship.py
+-rw-rw-rw-  2.0 fat     5554 b- defN 23-Apr-17 05:28 pyship/pyship.py
 -rw-rw-rw-  2.0 fat      651 b- defN 23-Apr-16 00:47 pyship/pyship_custom_print.py
 -rw-rw-rw-  2.0 fat      959 b- defN 23-Apr-16 00:47 pyship/pyship_exceptions.py
 -rw-rw-rw-  2.0 fat     2016 b- defN 23-Apr-16 00:47 pyship/pyship_get_icon.py
 -rw-rw-rw-  2.0 fat      262 b- defN 23-Apr-16 00:47 pyship/pyship_path.py
--rw-rw-rw-  2.0 fat     3212 b- defN 23-Apr-17 02:27 pyship/pyship_subprocess.py
+-rw-rw-rw-  2.0 fat     3212 b- defN 23-Apr-17 05:02 pyship/pyship_subprocess.py
 -rw-rw-rw-  2.0 fat      245 b- defN 23-Apr-16 00:47 pyship/launcher/__init__.py
 -rw-rw-rw-  2.0 fat      115 b- defN 23-Apr-16 00:47 pyship/launcher/__main__.py
 -rw-rw-rw-  2.0 fat     1153 b- defN 23-Apr-16 00:47 pyship/launcher/hash.py
--rw-rw-rw-  2.0 fat    10275 b- defN 23-Apr-17 02:27 pyship/launcher/launcher.py
+-rw-rw-rw-  2.0 fat    10359 b- defN 23-Apr-17 05:23 pyship/launcher/launcher.py
 -rw-rw-rw-  2.0 fat     1666 b- defN 23-Apr-16 00:47 pyship/launcher/metadata.py
 -rw-rw-rw-  2.0 fat      952 b- defN 23-Apr-16 00:47 pyship/launcher/restart_monitor.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-16 00:47 pyship/patch/__init__.py
 -rw-rw-rw-  2.0 fat     1256 b- defN 23-Apr-16 00:47 pyship/patch/pyship_patch.py
--rw-rw-rw-  2.0 fat     1088 b- defN 23-Apr-17 05:00 pyship-0.1.6.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1361 b- defN 23-Apr-17 05:00 pyship-0.1.6.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-17 05:00 pyship-0.1.6.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        7 b- defN 23-Apr-17 05:00 pyship-0.1.6.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     2794 b- defN 23-Apr-17 05:00 pyship-0.1.6.dist-info/RECORD
-36 files, 2011521 bytes uncompressed, 1501192 bytes compressed:  25.4%
+-rw-rw-rw-  2.0 fat     1088 b- defN 23-Apr-17 06:14 pyship-0.1.7.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1361 b- defN 23-Apr-17 06:14 pyship-0.1.7.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-17 06:14 pyship-0.1.7.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        7 b- defN 23-Apr-17 06:14 pyship-0.1.7.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     2794 b- defN 23-Apr-17 06:14 pyship-0.1.7.dist-info/RECORD
+36 files, 2012405 bytes uncompressed, 1501480 bytes compressed:  25.4%
```

## zipnote {}

```diff
@@ -87,23 +87,23 @@
 
 Filename: pyship/patch/__init__.py
 Comment: 
 
 Filename: pyship/patch/pyship_patch.py
 Comment: 
 
-Filename: pyship-0.1.6.dist-info/LICENSE
+Filename: pyship-0.1.7.dist-info/LICENSE
 Comment: 
 
-Filename: pyship-0.1.6.dist-info/METADATA
+Filename: pyship-0.1.7.dist-info/METADATA
 Comment: 
 
-Filename: pyship-0.1.6.dist-info/WHEEL
+Filename: pyship-0.1.7.dist-info/WHEEL
 Comment: 
 
-Filename: pyship-0.1.6.dist-info/top_level.txt
+Filename: pyship-0.1.7.dist-info/top_level.txt
 Comment: 
 
-Filename: pyship-0.1.6.dist-info/RECORD
+Filename: pyship-0.1.7.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pyship/_version_.py

```diff
@@ -1,10 +1,10 @@
 from pyshipupdate import __author__ as pyship_author
 
 __application_name__ = "pyship"
 __author__ = pyship_author
-__version__ = "0.1.6"
+__version__ = "0.1.7"
 __title__ = __application_name__
 __author_email__ = "j@abel.co"
 __url__ = "https://github.com/jamesabel/pyship"
 __download_url__ = "https://github.com/jamesabel/pyship"
 __description__ = "freezer, installer and updater for Python applications"
```

## pyship/create_launcher.py

```diff
@@ -1,13 +1,14 @@
 import sys
 from pathlib import Path
 import subprocess
 
 from typeguard import typechecked
 from balsa import get_logger
+from semver import VersionInfo
 
 from pyshipupdate import mkdirs
 import pyship
 from pyship import AppInfo, pyship_print, get_icon
 from pyship import __application_name__ as pyship_application_name
 from pyship.launcher import application_name as launcher_application_name
 from pyship.launcher import calculate_metadata, load_metadata, store_metadata
@@ -95,14 +96,15 @@
             else:
                 log.info(f"{launcher_source_path=}")
                 command_line.append(str(launcher_source_path))
 
             # avoid re-building launcher if its functionality wouldn't change
             assert isinstance(target_app_info.author, str)
             assert isinstance(target_app_info.is_gui, bool)
+            assert isinstance(target_app_info.version, VersionInfo)
             metadata = calculate_metadata(target_app_info.name, target_app_info.author, target_app_info.version, Path(launcher_module_dir), icon_path, target_app_info.is_gui)
             if not launcher_exe_path.exists() or metadata != load_metadata(app_path_output, metadata_filename):
                 pyship_print(f'building launcher ("{launcher_exe_path}")')
                 log.info(f"project_dir={str(target_app_info.project_dir)}")
                 log.info(f"{command_line=}")
                 # pyinstaller outputs regular status messages to stderr for some reason so just capture all output but also check for error return code
                 launcher_run = subprocess.run(command_line, cwd=target_app_info.project_dir, capture_output=True, text=True, check=True)
```

## pyship/download.py

```diff
@@ -28,24 +28,40 @@
                 shutil.copyfileobj(response.raw, out_file)
             del response
         else:
             raise Exception(f"error getting {file_name} from {url}")
     return destination_path
 
 
+def is_within_directory(directory: Path, target: Path):
+    abs_directory = directory.absolute()
+    abs_target = target.absolute()
+    prefix = os.path.commonprefix([abs_directory, abs_target])
+    return prefix == str(abs_directory)
+
+
+def safe_extract(tar, path: Path = Path(".")):
+    # for CVE-2007-4559
+    for member in tar.getmembers():
+        member_path = Path(path, member.name)
+        if not is_within_directory(path, member_path):
+            raise Exception("Attempted Path Traversal in Tar File")
+    tar.extractall(path, None, numeric_owner=False)
+
+
 @typechecked
 def extract(source_folder: Path, source_file: Path, destination_folder: Path):
     mkdirs(destination_folder, remove_first=True)
     source = Path(source_folder, source_file)
     log.debug(f"extracting {source} to {destination_folder}")
     if source_file.suffix == ".zip":
         with zipfile.ZipFile(source) as zf:
             # assumes a trusted .zip
             zf.extractall(destination_folder)
     elif source_file.suffix == ".tgz":
         with tarfile.open(source) as tf:
-            tf.extractall(destination_folder)
+            safe_extract(tf, destination_folder)
     elif source_file.suffix == ".gz":
         with tarfile.open(source) as tf:
-            tf.extractall(destination_folder)
+            safe_extract(tf, destination_folder)
     else:
         raise Exception(f"Unsupported file type {source_file.suffix} ({source_file})")
```

## pyship/pyship.py

```diff
@@ -3,14 +3,15 @@
 from typing import Union
 
 import appdirs
 from attr import attrs
 from typeguard import typechecked
 from awsimple import S3Access
 from balsa import get_logger
+from semver import VersionInfo
 
 from pyship import __application_name__ as pyship_application_name
 from pyship import __author__ as pyship_author
 from pyship import __version__ as pyship_version
 from pyship import run_nsis, create_clip, create_pyship_launcher, pyship_print, APP_DIR_NAME, create_clip_file, DEFAULT_DIST_DIR_NAME, get_app_info, PyShipCloud
 from pyship import PyshipNoProductDirectory, PyshipNoAppName, PyshipNoTargetAppInfo
 from pyshipupdate import mkdirs, create_bucket_name
@@ -28,15 +29,15 @@
 
     # cloud credentials, locations, etc.
     cloud_bucket: Union[str, None] = None  # e.g. AWS S3 bucket
     cloud_profile: Union[str, None] = None  # e.g. AWS IAM profile
     cloud_id: Union[str, None] = None  # e.g. AWS Access Key ID
     cloud_secret: Union[str, None] = None  # e.g. AWS Secret Access Key
     cloud_access: Union[PyShipCloud, None] = None  # making this accessible outside this class aids in testing, especially when mocking
-    upload: bool = True  # set to False to tell pyship to not attempt to perform file upload to the cloud (e.g. installer, clip files to AWS S3)
+    upload: bool = True  # set to False in order to tell pyship to not attempt to perform file upload to the cloud (e.g. installer, clip files to AWS S3)
 
     @typechecked
     def ship(self) -> Path:
         """
         Perform all the steps to ship the app, including creating the installer.
         :return: the path to the created installer or None if it could not be created
         """
@@ -59,14 +60,15 @@
             mkdirs(app_dir, remove_first=True)
 
             create_pyship_launcher(target_app_info, app_dir)  # create the OS specific launcher executable
 
             clip_dir = create_clip(target_app_info, app_dir, True, Path(self.project_dir, self.dist_dir), self.cache_dir, self.find_links)
 
             clip_file_path = create_clip_file(clip_dir)  # create clip file
+            assert isinstance(target_app_info.version, VersionInfo)
             installer_exe_path = run_nsis(target_app_info, target_app_info.version, app_dir)  # create installer
 
             if self.upload:
                 if self.cloud_profile is None and self.cloud_id is None:
                     pyship_print("no cloud access provided - will not attempt upload")
                 else:
                     # if cloud bucket not given we'll try to use the project name
```

## pyship/launcher/launcher.py

```diff
@@ -2,14 +2,15 @@
 from pathlib import Path
 from semver import VersionInfo
 import json
 import appdirs
 import re
 import logging
 import subprocess
+from typing import Union
 
 from ismain import is_main
 from balsa import HandlerType, get_logger
 import requests
 import sentry_sdk
 
 from pyship import __application_name__, __author__
@@ -69,15 +70,15 @@
 
     log.info(f"{verbose=}")
     log.info(f"{pyship_version=}")
 
     return verbose
 
 
-def launch(additional_path: Path = None, app_dir: Path = None) -> int:
+def launch(additional_path: Union[Path, None] = None, app_dir: Union[Path, None] = None) -> int:
     """
     launch the pyship app
     :param additional_path - additional search path for app (mainly for testing)
     :param app_dir - override app dir (mainly for testing)
     :return: 0 if no error, non-zero on error (like Windows apps)
     """
 
@@ -93,16 +94,16 @@
     # these should be set below, but in case there's no metadata file set them to something to allow the logging to be set up
     is_gui = False
     report_exceptions = True
     target_app_name = __application_name__
     target_app_author = __author__
 
     for metadata_file_path in app_dir.glob("*_metadata.json"):
-        with metadata_file_path.open() as f:
-            metadata = json.load(f)
+        with metadata_file_path.open() as metadata_file:
+            metadata = json.load(metadata_file)
             target_app_name = metadata.get("app")
             target_app_author = metadata.get("author", target_app_author)
             is_gui = metadata.get("is_gui", is_gui)
             report_exceptions = metadata.get("report_exceptions", report_exceptions)
 
     setup_logging(is_gui, report_exceptions)
 
@@ -183,23 +184,23 @@
                         if (std_err is not None and len(std_err.strip()) > 0) or (target_process.returncode != ok_return_code and target_process.returncode != restart_return_code):
                             # if there's a problem, log it with what the caller provides
                             for out, log_function in [(std_out, log.warning), (std_err, log.error)]:
                                 if out is not None and len(out.strip()) > 0:
                                     log_function(out)
 
                         # log, and possibly print, each line of output from the process
-                        for name, std_x, f in [("stdout", std_out, sys.stdout), ("stderr", std_err, sys.stderr)]:
+                        for name, std_x, sys_f in [("stdout", std_out, sys.stdout), ("stderr", std_err, sys.stderr)]:
                             if std_x is not None and len(std_x.strip()) > 0:
                                 for so_line in std_x.splitlines():
                                     so_line_strip = so_line.strip()
                                     if len(so_line_strip) > 0:
                                         log.info(f"{name}:{so_line_strip}")  # when logging, start with the name of the output string (stdout, stderr)
 
                                 # output stdout, stderr that came (directly) from the process
-                                print(std_x, file=f)
+                                print(std_x, file=sys_f)
 
                         log.info(f"{return_code=}")
 
                     except FileNotFoundError as e:
                         log.error(f"{e} {cmd}")
                         return_code = error_return_code
                 else:
```

## Comparing `pyship-0.1.6.dist-info/LICENSE` & `pyship-0.1.7.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pyship-0.1.6.dist-info/METADATA` & `pyship-0.1.7.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyship
-Version: 0.1.6
+Version: 0.1.7
 Summary: freezer, installer and updater for Python applications
 Home-page: https://github.com/jamesabel/pyship
 Download-URL: https://github.com/jamesabel/pyship
 Author: abel
 Author-email: j@abel.co
 License: MIT License
 Keywords: freezer,installer,ship
```

## Comparing `pyship-0.1.6.dist-info/RECORD` & `pyship-0.1.7.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,36 +1,36 @@
 pyship/__init__.py,sha256=x7jisL_D4Wuyw5tfmyLz57WlRLX9QQYpkb3Vne_J3W0,1336
 pyship/__main__.py,sha256=mn9BUEsE52gyI7SLrXh_dBxLwD335iVG_iqRCNqocq4,86
-pyship/_version_.py,sha256=s-tyBvcMBAL-DIOAUGlD0JGMe-peqnUrSIg7hxunfSY,389
+pyship/_version_.py,sha256=_lpeahvzNw7RLUbyDSBVoziS-tN4LJxasGcrBlkALBo,389
 pyship/app_info.py,sha256=mhbwJHkoWek1FRv9dwRlrf_8ssNK-UtDhvnZ-8kWQFo,7347
 pyship/arguments.py,sha256=p4cA8FwbNSZqg4XI6LsYit1QN7TpAWWZH2xrgLf-f-g,1882
 pyship/atomic_zip.py,sha256=HEZuHEatyWAGqZcvS_EoByQQRCQph5ajkszfZ3OxnRU,1366
 pyship/clip.py,sha256=kmdbnzJbgD9ggBEUqs73_p2kac2looaOeGItk9N50xo,8237
 pyship/cloud.py,sha256=FDJvTlURrtA00z3a8fWkR_K7YzURNKnd0NypJQKxHAo,1264
 pyship/constants.py,sha256=FVkr1c9XDkaXyQnL1bEP-dWSbk4SUkrRuVQYPIxHMaA,19
-pyship/create_launcher.py,sha256=vIZi5ABVmfXKFc9IHjYMkyAVbRKkSIxWgvHSdIyNrD8,6146
-pyship/download.py,sha256=inG18XKZ1qhOam27prKT0cTUx1IXRQooUPiIezZ_xf8,1871
+pyship/create_launcher.py,sha256=HQby4dmnBnSbohspex8TaCgu-jEaEjLb1QGE76D_ky4,6247
+pyship/download.py,sha256=QHbdVwxLNBToMEC0tOF2ZquDpoydRu0-cj7LOERr5Q4,2460
 pyship/get-pip.py,sha256=BC5otuX7znr6F8Llv4oQLwLDp22R0GwHmThf0UIHRHI,1829954
 pyship/logging.py,sha256=cIB7487tN8TsKeDHwwzjA30rHRW5Ci5GA5uPbaEXaY0,966
 pyship/main.py,sha256=pALpy8ooWsKkUpWUtGWO567I9u1fbIFWdBU0dnWm2K4,866
 pyship/nsis.py,sha256=QhG8FMwFZRsoPQbntCSCr5av1NNqgjksinhfxXpc0Vg,12744
 pyship/py.typed,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pyship/pyship.ico,sha256=9oiMtmA7NiBmxM0NmMJQU5jXmnbEWCdqTaO3XvJ7ozY,103500
-pyship/pyship.py,sha256=tqTd6kOU7i_LP9VCfSCcGZBpGU8OfPiCxb7arRAIGuc,5444
+pyship/pyship.py,sha256=vMeFK940mIReKTMy0x-hFvTHXfATt97tL5knyK7R_9I,5554
 pyship/pyship_custom_print.py,sha256=WHgZNZNiKwQjKmxdsBrn7aJfG5VJdfQ1-9AC_tg5MxE,651
 pyship/pyship_exceptions.py,sha256=teUOh3FuRUU9hyv7L4owACQZPWNdwpYTEz6l-Ao35nw,959
 pyship/pyship_get_icon.py,sha256=FwglA67RXX0lhW9baIGsQy3_T4hVsVkBmvAhPyuhHLo,2016
 pyship/pyship_path.py,sha256=RpU2n7pWXTr0501S7U8KxWCpBc8jOqKPuaX0X6IWPI8,262
 pyship/pyship_subprocess.py,sha256=hH4MW_j2zLJLDmLDkkl2JWupXrvSemAeCPAEtPdSGyk,3212
 pyship/launcher/__init__.py,sha256=25vVghziYIHDBA0mCaGqhj6hWxxjQqlm4LrY0Hem0YY,245
 pyship/launcher/__main__.py,sha256=KhFSf1RU5Cj15y0c4FlzvIvDpWWi9NKYy0gzJ-w7KQE,115
 pyship/launcher/hash.py,sha256=THEh8G-StEJeh5tH24RnAQpYB0Zv1nnBwqOoStN6_NY,1153
-pyship/launcher/launcher.py,sha256=XI0X4NvYYxz88dYf9_Fk7D1D_Y0qC1ZRfef1RFB4r5g,10275
+pyship/launcher/launcher.py,sha256=AmjAwt8VbQTOVmRC-vUd7Cm-KS3ALYe1RLSxmcutthY,10359
 pyship/launcher/metadata.py,sha256=vkf70w_eX8EZbMDHFKqBWW1kn0RyZl70z4DGsLCahmA,1666
 pyship/launcher/restart_monitor.py,sha256=jfzchLxGuC_xUNdPAr849FhAdozJ6BX9M-gqLd-gGIA,952
 pyship/patch/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 pyship/patch/pyship_patch.py,sha256=KgObD80QPeOhu1KCdhdQzn-4AnyzCUxIGWKj22BjTCc,1256
-pyship-0.1.6.dist-info/LICENSE,sha256=wJpPh6rC_YhbTZ7ZIy1VjrqeLdJ8Pz0ppx2MUi7s8Dg,1088
-pyship-0.1.6.dist-info/METADATA,sha256=ZEZv2MqEiTzDYtbXX3_6u-xhynfaIFW3lP2wEFYLWw8,1361
-pyship-0.1.6.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-pyship-0.1.6.dist-info/top_level.txt,sha256=mlozeft-UInVAceSajzNvtkn2vPa8El9j0RulsTVtlU,7
-pyship-0.1.6.dist-info/RECORD,,
+pyship-0.1.7.dist-info/LICENSE,sha256=wJpPh6rC_YhbTZ7ZIy1VjrqeLdJ8Pz0ppx2MUi7s8Dg,1088
+pyship-0.1.7.dist-info/METADATA,sha256=0vrDjPX1xcZbErIhF_WDmKFPVRgviw4a0iJhEPLUm00,1361
+pyship-0.1.7.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+pyship-0.1.7.dist-info/top_level.txt,sha256=mlozeft-UInVAceSajzNvtkn2vPa8El9j0RulsTVtlU,7
+pyship-0.1.7.dist-info/RECORD,,
```

