# Comparing `tmp/odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3-py3-none-any.whl.zip` & `tmp/odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,23 +1,23 @@
-Zip file size: 27995 bytes, number of entries: 21
--rw-r--r--  2.0 unx     3410 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/README.rst
--rw-r--r--  2.0 unx       43 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/__init__.py
--rw-r--r--  2.0 unx      519 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/__manifest__.py
--rw-r--r--  2.0 unx     3697 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/i18n/delivery_carrier_pricelist.pot
--rw-r--r--  2.0 unx       59 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/models/__init__.py
--rw-r--r--  2.0 unx     5808 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/models/delivery_carrier.py
--rw-r--r--  2.0 unx     1426 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/models/stock_picking.py
--rw-r--r--  2.0 unx       88 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       80 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/readme/CREDITS.rst
--rw-r--r--  2.0 unx      577 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      198 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/security/ir.model.access.csv
--rw-r--r--  2.0 unx     9455 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/static/description/icon.png
--rw-r--r--  2.0 unx    12889 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/static/description/index.html
--rw-r--r--  2.0 unx       38 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/tests/__init__.py
--rw-r--r--  2.0 unx     4342 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/tests/test_delivery_pricelist.py
--rw-r--r--  2.0 unx       38 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/wizards/__init__.py
--rw-r--r--  2.0 unx     1794 b- defN 21-Aug-17 13:36 odoo/addons/delivery_carrier_pricelist/wizards/choose_delivery_carrier.py
--rw-r--r--  2.0 unx     3966 b- defN 21-Aug-17 13:36 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 21-Aug-17 13:36 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 21-Aug-17 13:36 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2470 b- defN 21-Aug-17 13:36 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/RECORD
-21 files, 50994 bytes uncompressed, 23685 bytes compressed:  53.6%
+Zip file size: 28099 bytes, number of entries: 21
+-rw-r--r--  2.0 unx     3410 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/README.rst
+-rw-r--r--  2.0 unx       43 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/__init__.py
+-rw-r--r--  2.0 unx      519 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/__manifest__.py
+-rw-r--r--  2.0 unx     3697 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/i18n/delivery_carrier_pricelist.pot
+-rw-r--r--  2.0 unx       59 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/models/__init__.py
+-rw-r--r--  2.0 unx     5925 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/models/delivery_carrier.py
+-rw-r--r--  2.0 unx     1426 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/models/stock_picking.py
+-rw-r--r--  2.0 unx       88 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       80 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/readme/CREDITS.rst
+-rw-r--r--  2.0 unx      577 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      198 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     9455 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/static/description/icon.png
+-rw-r--r--  2.0 unx    12889 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/static/description/index.html
+-rw-r--r--  2.0 unx       38 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/tests/__init__.py
+-rw-r--r--  2.0 unx     4361 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/tests/test_delivery_pricelist.py
+-rw-r--r--  2.0 unx       38 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/wizards/__init__.py
+-rw-r--r--  2.0 unx     1794 b- defN 23-Apr-17 11:27 odoo/addons/delivery_carrier_pricelist/wizards/choose_delivery_carrier.py
+-rw-r--r--  2.0 unx     3999 b- defN 23-Apr-17 11:27 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-17 11:27 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Apr-17 11:27 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2450 b- defN 23-Apr-17 11:27 odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/RECORD
+21 files, 51143 bytes uncompressed, 23829 bytes compressed:  53.4%
```

## zipnote {}

```diff
@@ -45,20 +45,20 @@
 
 Filename: odoo/addons/delivery_carrier_pricelist/wizards/__init__.py
 Comment: 
 
 Filename: odoo/addons/delivery_carrier_pricelist/wizards/choose_delivery_carrier.py
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/METADATA
+Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/WHEEL
+Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/top_level.txt
+Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/RECORD
+Filename: odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/delivery_carrier_pricelist/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2020 Camptocamp
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Shipping Method Pricelist",
     "summary": "Compute method method fees based on the product's pricelist.",
-    "version": "14.0.1.0.0",
+    "version": "14.0.1.0.2",
     "category": "Delivery",
     "website": "https://github.com/OCA/delivery-carrier",
     "author": "Camptocamp, Odoo Community Association (OCA)",
     "installable": True,
     "license": "AGPL-3",
     "depends": ["delivery"],
     "data": ["security/ir.model.access.csv"],
```

## odoo/addons/delivery_carrier_pricelist/models/delivery_carrier.py

```diff
@@ -31,23 +31,23 @@
         "Pricelist Cost: the customer will be invoiced the price of the "
         "product based on the pricelist of the sales order. The provider's "
         "cost is ignored.",
     )
 
     def rate_shipment(self, order):
         if self.invoice_policy == "pricelist":
-            current_type = self.delivery_type
-            # force computation from pricelist when the invoicing policy says
-            # so
-            self.delivery_type = "pricelist"
-            result = super().rate_shipment(order)
-            self.delivery_type = current_type
+            # Force computation from pricelist based on invoicing policy
+            # using a temporary record.
+            # Required since core's `rate_shipment` relies on `self.delivery_type`
+            # to lookup for the right handler.
+            tmp_rec = self.new(self.copy_data()[0])
+            tmp_rec.delivery_type = "pricelist"
+            result = super(DeliveryCarrier, tmp_rec).rate_shipment(order)
             return result
-        else:
-            return super().rate_shipment(order)
+        return super().rate_shipment(order)
 
     def send_shipping(self, pickings):
         result = super().send_shipping(pickings)
         if self.invoice_policy == "pricelist":
             # force computation from pricelist when the invoicing policy says
             # so
             rates = self.pricelist_send_shipping(pickings)
```

## odoo/addons/delivery_carrier_pricelist/tests/test_delivery_pricelist.py

```diff
@@ -2,15 +2,15 @@
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 from lxml import etree
 
 from odoo.tests.common import Form, SavepointCase
 
 
-class TestRoutePutaway(SavepointCase):
+class TestCarrierPricelist(SavepointCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
         cls.env = cls.env(context=dict(cls.env.context, tracking_disable=True))
         cls.partner_18 = cls.env.ref("base.res_partner_18")
         cls.product_4 = cls.env.ref("product.product_product_4")
         cls.product_uom_unit = cls.env.ref("uom.product_uom_unit")
@@ -44,67 +44,66 @@
                 "name": "Pricelist Based",
                 "delivery_type": "pricelist",
                 "product_id": cls.fee_product.id,
                 "country_ids": [(6, 0, [cls.partner_18.country_id.id])],
             }
         )
 
-    def create_price_list(self):
+    def create_price_list_item(self):
         price = 13.0
-        self.pricelist_item = self.env["product.pricelist.item"].create(
+        return self.env["product.pricelist.item"].create(
             {
                 "pricelist_id": self.pricelist.id,
                 "product_id": self.fee_product.id,
                 "applied_on": "0_product_variant",
                 "fixed_price": price,
             }
         )
 
-    def create_wizard(self):
-        self.delivery_wizard = Form(
-            self.env["choose.delivery.carrier"].with_context(
-                {"default_order_id": self.sale_normal_delivery_charges.id}
-            )
-        )
+    def get_wiz_form(self, **ctx):
+        default_ctx = {"default_order_id": self.sale_normal_delivery_charges.id}
+        ctx = {**default_ctx, **ctx}
+        return Form(self.env["choose.delivery.carrier"].with_context(**ctx))
 
     def test_wizard_price(self):
-        self.create_price_list()
-        self.create_wizard()
-        price = self.pricelist_item.fixed_price
-        delivery_wizard = self.delivery_wizard
-        saved_carrier = delivery_wizard.carrier_id
-        delivery_wizard.carrier_id = self.carrier_pricelist
-        self.assertEqual(delivery_wizard.display_price, price)
+        pl_item = self.create_price_list_item()
+        wiz_form = self.get_wiz_form()
+        price = pl_item.fixed_price
+        saved_carrier = wiz_form.carrier_id
+        wiz_form.carrier_id = self.carrier_pricelist
+        self.assertEqual(wiz_form.display_price, price)
 
-        delivery_wizard.carrier_id = saved_carrier
-        self.assertEqual(delivery_wizard.display_price, 0.0)
+        wiz_form.carrier_id = saved_carrier
+        self.assertEqual(wiz_form.display_price, 0.0)
         self.partner_18.country_id = self.env.ref("base.fr")
-        delivery_wizard.carrier_id = self.carrier_pricelist
-        self.assertEqual(delivery_wizard.display_price, 0.0)
+        wiz_form.carrier_id = self.carrier_pricelist
+        self.assertEqual(wiz_form.display_price, 0.0)
 
     def test_wizard_invoice_policy(self):
-        self.create_price_list()
-        self.create_wizard()
-        delivery_wizard = self.delivery_wizard
-
+        self.create_price_list_item()
+        wiz_form = self.get_wiz_form()
         self.carrier_pricelist.invoice_policy = "pricelist"
-        delivery_wizard.carrier_id = self.carrier_pricelist
+        wiz_form.carrier_id = self.carrier_pricelist
 
     def test_wizard_send_shipping(self):
-        self.create_price_list()
-        self.create_wizard()
+        pl_item = self.create_price_list_item()
+        wiz_form = self.get_wiz_form()
+        price = pl_item.fixed_price
         self.carrier_pricelist.invoice_policy = "pricelist"
-        delivery_wizard = self.delivery_wizard
-        delivery_wizard.carrier_id = self.carrier_pricelist
+        wiz_form.carrier_id = self.carrier_pricelist
+        rec = wiz_form.save()
+        rec.button_confirm()
         so = self.sale_normal_delivery_charges
         so.action_confirm()
-        link = delivery_wizard.carrier_id.get_tracking_link(so.picking_ids)
+        self.assertEqual(so.carrier_id, wiz_form.carrier_id)
+        link = wiz_form.carrier_id.get_tracking_link(so.picking_ids)
         self.assertFalse(link)
-        result = delivery_wizard.carrier_id.send_shipping(so.picking_ids)
-        self.assertEqual(result, [{"exact_price": 0.0, "tracking_number": False}])
+        result = wiz_form.carrier_id.send_shipping(so.picking_ids)
+        expecting = [{"exact_price": price, "tracking_number": False}]
+        self.assertEqual(result, expecting)
 
     def test_fields_view_get(self):
         carrier = self.carrier_pricelist
         result = carrier.fields_view_get()
         doc = etree.XML(result["arch"])
         xpath_expr = "//notebook"
         nodes = doc.xpath(xpath_expr)
```

## Comparing `odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/METADATA` & `odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,18 +1,19 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-delivery-carrier-pricelist
-Version: 14.0.1.0.1.dev3
+Version: 14.0.1.0.2
 Summary: Compute method method fees based on the product's pricelist.
 Home-page: https://github.com/OCA/delivery-carrier
 Author: Camptocamp, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
+Classifier: Framework :: Odoo :: 14.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
 Requires-Python: >=3.6
 Requires-Dist: odoo (<14.1dev,>=14.0a)
 
 =========================
 Shipping Method Pricelist
 =========================
```

## Comparing `odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/RECORD` & `odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 odoo/addons/delivery_carrier_pricelist/README.rst,sha256=iOXBbIfDu2WJfk0dTxM-pDNMLcH1geFtjcyJTPuLNFY,3410
 odoo/addons/delivery_carrier_pricelist/__init__.py,sha256=0XNpxETgFdVxFDEw03O8oL3NtTSk3we-HEZW2sPKzIU,43
-odoo/addons/delivery_carrier_pricelist/__manifest__.py,sha256=r8kEyDXCgK3YQKMkPGlV-k9UqHdb8T59_FbjfN6DJ1I,519
+odoo/addons/delivery_carrier_pricelist/__manifest__.py,sha256=g8sMZBJte3zwfRraQZha9SiM1AznAlCotj1HEtldtNU,519
 odoo/addons/delivery_carrier_pricelist/i18n/delivery_carrier_pricelist.pot,sha256=BgtzrZHvwkQmUa2dXPm3-zf_k9G4ZyGwHLyHLZ082Nc,3697
 odoo/addons/delivery_carrier_pricelist/models/__init__.py,sha256=XzhoC9qEksVQVMUPjEJvgOlv4xTuTg5LoBIuDRRZ_Rg,59
-odoo/addons/delivery_carrier_pricelist/models/delivery_carrier.py,sha256=fGyBO7NHRAHJonrzzK86o7GBmJKD5F9ng3qceb9Pt-E,5808
+odoo/addons/delivery_carrier_pricelist/models/delivery_carrier.py,sha256=kmm3oVX7mQn-uwemZaMMguN-vLvH9nLCI-XusII7pH4,5925
 odoo/addons/delivery_carrier_pricelist/models/stock_picking.py,sha256=NGncxq0fWzdBhJq2EesBcgYoQeGOzWy-YG7zrjpzLEM,1426
 odoo/addons/delivery_carrier_pricelist/readme/CONTRIBUTORS.rst,sha256=So7BLIyZeZ9dKFCWDgDx_x-WUujIoDHqqqmuo1C9mkk,88
 odoo/addons/delivery_carrier_pricelist/readme/CREDITS.rst,sha256=qJic0c2qWDTloupuq6j69JdIEo70Xpy6-b4MZho00Og,80
 odoo/addons/delivery_carrier_pricelist/readme/DESCRIPTION.rst,sha256=oDithN7t-NbAxzncgX32t1a9m-cx2FHq59Vq602B07k,577
 odoo/addons/delivery_carrier_pricelist/security/ir.model.access.csv,sha256=NuuCJjJGbwO-rbX3LShGdJRKd3CztBKwWd8QKhwEmBw,198
 odoo/addons/delivery_carrier_pricelist/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/delivery_carrier_pricelist/static/description/index.html,sha256=fPvL7RndEgVd_5xXcfC_ROrdInRJNq7sBK-mj0bT_tM,12889
 odoo/addons/delivery_carrier_pricelist/tests/__init__.py,sha256=tOd3djGJgAOKC_g_Kkvl10PQgflo3GwuVM-xXGpPBFk,38
-odoo/addons/delivery_carrier_pricelist/tests/test_delivery_pricelist.py,sha256=1YOEc7Ta2bd4qsMF6p1wnJoDvlzJKkCQILESxmeta8A,4342
+odoo/addons/delivery_carrier_pricelist/tests/test_delivery_pricelist.py,sha256=cH_RuHjE5fHS4bX_e2mw5a4TOZ-YmNHbAjuqJ8J3BdM,4361
 odoo/addons/delivery_carrier_pricelist/wizards/__init__.py,sha256=0v9G73b7yN4Q7l8qPYmNn0AtJWecUL1DFifaM0O2UTY,38
 odoo/addons/delivery_carrier_pricelist/wizards/choose_delivery_carrier.py,sha256=_DxsyazSEN-ydi6r0oBxvxD90LSMLlyT-7nOkjove94,1794
-odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/METADATA,sha256=0f1HtIRZITVRw-9C_N0n6IIsZZiWuXZB26PhsU0z4F0,3966
-odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_delivery_carrier_pricelist-14.0.1.0.1.dev3.dist-info/RECORD,,
+odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/METADATA,sha256=3QlZwyGz_QevuaxT1FfX1nm-olezN09bL2CKDaqcf2E,3999
+odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_delivery_carrier_pricelist-14.0.1.0.2.dist-info/RECORD,,
```

